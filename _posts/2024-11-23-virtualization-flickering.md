---
title: React Native FlatList ê¹œë¹¡ì„(Flickering) í˜„ìƒ, ì™œ ìƒê¸°ê³  ì–´ë–»ê²Œ í•´ê²°í• ê¹Œ
date: 2024-11-23 18:27:00 +/-TTTT
categories: [Frontend, React Native, Optimization]
tags: [flatlist, flickering, optimization, reconciliation, virtualization]
image:
  path: assets/img/writing/11/virtualized_list.png
sitemap:
  changefreq: daily
  priority: 0.5
---

## 1. ê°œìš”

React Nativeì—ì„œ ëŒ€ìš©ëŸ‰ ë°ì´í„°ë¥¼ ìŠ¤í¬ë¡¤ëŸ¬ë¸”í•˜ê²Œ ë Œë”ë§í•˜ê¸° ìœ„í•´ [ScrollView](https://reactnative.dev/docs/scrollview)ì™€ [FlatList](https://reactnative.dev/docs/flatlist)ë¥¼ í™œìš©í•©ë‹ˆë‹¤. ì´ ì¤‘ `FlatList`ëŠ” **ê°€ìƒí™”(Virtualization)**ë¥¼ í†µí•´ ëŒ€ëŸ‰ ë°ì´í„°ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆë„ë¡ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤.

> `ScrollView`ëŠ” ëª¨ë“  ë°ì´í„°ë¥¼ í•œ ë²ˆì— ë Œë”ë§í•˜ëŠ” ë°˜ë©´, `FlatList`ëŠ” ê°€ìƒí™” ê¸°ìˆ ì„ í™œìš©í•´ í™”ë©´ì— ë³´ì´ëŠ” í•­ëª©ë§Œ ë Œë”ë§í•©ë‹ˆë‹¤.
{: .prompt-info }

í•˜ì§€ë§Œ `FlatList`ë¥¼ ì‚¬ìš©í•  ë•Œ ëª‡ ê°€ì§€ ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ì¤‘ í•˜ë‚˜ê°€ ë°”ë¡œ **ìŠ¤í¬ë¡¤ ë„ì¤‘ ë°œìƒí•˜ëŠ” ê¹œë¹¡ì„(Flickering) í˜„ìƒ**ì…ë‹ˆë‹¤. ì´ëŸ¬í•œ ê¹œë¹¡ì„ì˜ ì£¼ìš” ì›ì¸ì€ ì£¼ë¡œ ë°ì´í„°ë¥¼ ë Œë”ë§í•  ë•Œ ê³ ìœ  key ê°’ì´ ì ìš©ë˜ì–´ ìˆì§€ ì•Šì•„ ë°œìƒí•©ë‹ˆë‹¤.

ì´ ê¸€ì—ì„œëŠ” ë¬¸ì œì˜ ì›ì¸ì„ ì‹¬ì¸µì ìœ¼ë¡œ ë¶„ì„í•˜ê³ , ì™œ ê³ ìœ  key ê°’ì„ ì ìš©í•˜ëŠ” ê²ƒì´ ê¹œë¹¡ì„ í˜„ìƒì„ í•´ê²°í•  ìˆ˜ ìˆëŠ”ì§€ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.

+ ì¶”ê°€ë¡œ ê³ ìœ  key ê°’ì„ ì ìš©í–ˆìŒì—ë„ ê¹œë¹¡ì„ í˜„ìƒì´ ë°œìƒí•˜ëŠ” ê°€ìƒí™”ì˜ í•œê³„ê¹Œì§€ ë‹¤ë¤„ë³´ê² ìŠµë‹ˆë‹¤.

## 2. Flickering ì›ì¸ ë¶„ì„

ìš°ì„  ì›í™œí•œ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ ê° ì•„ì´í…œì— [Lorem Picsum](https://picsum.photos/) ì´ë¯¸ì§€ì™€ [Lorem Ipsum](https://www.lipsum.com/)ì„ ì¶”ê°€í•˜ê³  Perf Monitorë¥¼ í†µí•´ ì„±ëŠ¥ì„ í™•ì¸í•´ ë³´ê² ìŠµë‹ˆë‹¤.

> **Perf Monitor**
>
> UI Frameê³¼ JS Frameì„ ì‹¤ì‹œê°„ìœ¼ë¡œ ëª¨ë‹ˆí„°ë§í•˜ê³  ìµœì í™” í¬ì¸íŠ¸ë¥¼ íŒŒì•…í•˜ëŠ” ë° ì‚¬ìš©ë˜ëŠ” ë„êµ¬ë¡œ ì£¼ë¡œ ë‹¤ìŒê³¼ ê°™ì€ ìƒí™©ì— ì‚¬ìš©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
> 1. UI/JS í”„ë ˆì„ ì†ë„ í™•ì¸
> 2. Memory ì‚¬ìš©ëŸ‰ ë¶„ì„
> 
> ì°¸ê³ : [https://reactnative.dev/docs/profiling#3-find-your-process](https://reactnative.dev/docs/profiling#3-find-your-process)

ì‹¤ì œ í”„ë¡œë•ì…˜ì—ì„œ ì‚¬ìš©ë  ìˆ˜ ìˆëŠ” UIì™€ ìƒí™©ì„ ê³ ë ¤í•˜ì—¬ ë‹¤ìŒê³¼ ê°™ì´ í…ŒìŠ¤íŠ¸ í™˜ê²½ì„ êµ¬ì„±í•˜ì˜€ìŠµë‹ˆë‹¤.

- key ê°’ì— ì¤‘ë³µì´ ë°œìƒí•  ìˆ˜ ìˆë‹¤.
- ë¹ ë¥¸ ì†ë„ë¡œ ìŠ¤í¬ë¡¤ë§í•œë‹¤.

{% raw %}
```tsx
import { StyleSheet, Text, View, Image, FlatList } from 'react-native';
import { useGetTestData } from './useGetTestData';

export function List() {
  const { data } = useGetTestData();

  return (
    <View style={styles.container}>
      <FlatList
        data={data}
        /**
         * ğŸš¨ keyExtractorì—ì„œ Itemë“¤ì˜ keyê°’ì´ ì¤‘ë³µë  ìˆ˜ ìˆë„ë¡ ì„ì˜ ìˆ˜ì •
         */
        keyExtractor={(item) => (Math.random() <= 0.1 ? '1' : String(item.id))}
        renderItem={({ item }) => <Item id={item.id} />}
        // ...
      />
    </View>
  );
}

function Item({ id }: { id: number }) {
  return (
    <View style={styles.itemView}>
      <Image source={{ uri: 'https://picsum.photos/200' }} width={128} height={128} />
      <View style={styles.textView}>
        <Text style={styles.title}>
          ì œëª©: hello world - {id}
        </Text>
        <Text style={styles.description}>
          Lorem Ipsum is simply dummy text of the printing and typesetting
          industry. Lorem Ipsum has been the industry
        </Text>
      </View>
    </View>
  );
};
```
{% endraw %}

<div align="center">
  <video controls="" width="240" height="400" muted="" autoplay="">
    <source src="https://github.com/BangDori/bangdori.github.io/raw/main/assets/img/writing/11/flickering_issue.mp4" type="video/mp4">
  </video>
</div>

í˜„ì¬ ìœ„ ì˜ìƒì—ì„œëŠ” ìŠ¤í¬ë¡¤ ì‹œ `Encountered two children with the same key` ê²½ê³ ê°€ í‘œì‹œë˜ê³  ìˆìœ¼ë©° ì§€ì†ì ìœ¼ë¡œ ê¹œë¹¡ì„ í˜„ìƒì´ ë°œìƒí•˜ê³  ìˆìŠµë‹ˆë‹¤. (+ JS Frameì´ 1ê¹Œì§€ ë‚´ë ¤ê°€ëŠ” í”„ë ˆì„ ì €í•˜ëŠ” ë¤)

ìœ„ ì´ìŠˆì™€ ê¹œë¹¡ì„ í˜„ìƒì—ëŠ” ì–´ë–¤ ê´€ê³„ê°€ ìˆì„ê¹Œìš”? ì´ëŸ¬í•œ í˜„ìƒì´ ë°œìƒí•˜ëŠ” ì´ìœ ë¥¼ ì•Œê¸° ìœ„í•´ì„œëŠ” ë¨¼ì € Reactê°€ ê°€ìƒ ë”ì„ ì‚¬ìš©í•˜ì—¬ ì‹¤ì œ DOMê³¼ì˜ ì°¨ì´ë¥¼ ë¹„êµí•˜ê³  ì—…ë°ì´íŠ¸í•˜ëŠ” ê³¼ì •ì¸ ì¬ì¡°ì •(Reconciliation) ì•Œê³ ë¦¬ì¦˜ì— ëŒ€í•´ ì•Œì•„ì•¼ í•©ë‹ˆë‹¤.

### 2-1. Reconciliation

React ë‚´ë¶€ì—ì„œëŠ” ê°€ìƒ DOMê³¼ ì‹¤ì œ DOMì„ ë¹„êµí•˜ëŠ” ì•Œê³ ë¦¬ì¦˜ì„ ê°€ì§€ê³  ìˆëŠ”ë°, ê¸°ì¡´ì— í•˜ë‚˜ì˜ íŠ¸ë¦¬ë¥¼ ê°€ì§€ê³  ë‹¤ë¥¸ íŠ¸ë¦¬/ë¡œ ë³€í™˜í•˜ê¸° ìœ„í•œ ì¼ë°˜ì ì¸ í•´ê²°ì±…ì´ ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ [ì´ëŸ¬í•œ ì•Œê³ ë¦¬ì¦˜](https://grfia.dlsi.ua.es/ml/algorithms/references/editsurvey_bille.pdf)ë„ nê°œì˜ ì—˜ë¦¬ë¨¼íŠ¸ê°€ ìˆëŠ” íŠ¸ë¦¬ì— ëŒ€í•´ O(N^3)ì˜ ë³µì¡ë„ë¥¼ ê°€ì§‘ë‹ˆë‹¤.

ë§Œì•½ Reactì— ì´ ì•Œê³ ë¦¬ì¦˜ì„ ì ìš©í•˜ê²Œ ëœë‹¤ë©´, 1000ê°œì˜ ì—˜ë¦¬ë¨¼íŠ¸ë¥¼ ê·¸ë¦¬ê¸° ìœ„í•´ 10ì–µ ë²ˆì˜ ë¹„êµ ì—°ì‚°ì„ ìˆ˜í–‰í•´ì•¼ í•©ë‹ˆë‹¤. ë„ˆë¬´ë‚˜ë„ ë¹„ì‹¼ ì—°ì‚°ì´ê³ , ì´ë¥¼ ì ìš©í–ˆë‹¤ë©´ Reactê°€ í˜„ì¬ì˜ ìœ„ìƒì„ ìœ ì§€í•˜ì§€ ëª»í–ˆì„ ê²ë‹ˆë‹¤.

ê·¸ë˜ì„œ ReactëŠ” ë‘ ê°€ì§€ ê°€ì •ì„ ê¸°ë°˜í•˜ì—¬ O(N) ë³µì¡ë„ì˜ [íœ´ë¦¬ìŠ¤í‹± ì•Œê³ ë¦¬ì¦˜](https://en.wikipedia.org/wiki/Heuristic_(computer_science))ì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

1. ì„œë¡œ ë‹¤ë¥¸ íƒ€ì…ì˜ ë‘ ì—˜ë¦¬ë¨¼íŠ¸ëŠ” ì„œë¡œ ë‹¤ë¥¸ íŠ¸ë¦¬ë¥¼ ë§Œë“¤ì–´ë‚¸ë‹¤.
2. ê°œë°œìê°€ key propì„ í†µí•´, ì—¬ëŸ¬ ë Œë”ë§ ì‚¬ì´ì—ì„œ ì–´ë–¤ ìì‹ ì—˜ë¦¬ë¨¼íŠ¸ê°€ ë³€ê²½ë˜ì§€ ì•Šì•„ì•¼ í• ì§€ í‘œì‹œí•´ ì¤„ ìˆ˜ ìˆë‹¤.

ë‘ ê°œì˜ íŠ¸ë¦¬(ê°€ìƒ DOMê³¼ ì‹¤ì œ DOM)ë¥¼ ë¹„êµí•  ë•Œ, ReactëŠ” ë‘ ì—˜ë¦¬ë¨¼íŠ¸ì˜ ë£¨íŠ¸(root) ì—˜ë¦¬ë¨¼íŠ¸ë¶€í„° ë¹„êµí•©ë‹ˆë‹¤. ì´í›„ì˜ ë™ì‘ì€ ë£¨íŠ¸ ì—˜ë¦¬ë¨¼íŠ¸ì˜ íƒ€ì…ì— ë”°ë¼ ë‹¬ë¼ì§‘ë‹ˆë‹¤.

#### 2-1-1. ì—˜ë¦¬ë¨¼íŠ¸ì˜ íƒ€ì…ì´ ë‹¤ë¥¸ ê²½ìš°

ë‘ ë£¨íŠ¸ ì—˜ë¦¬ë¨¼íŠ¸ì˜ íƒ€ì…ì´ ë‹¤ë¥´ë©´, ReactëŠ” ì´ì „ íŠ¸ë¦¬ë¥¼ ë²„ë¦¬ê³  ì™„ì „íˆ ìƒˆë¡œìš´ íŠ¸ë¦¬ë¥¼ êµ¬ì¶•í•©ë‹ˆë‹¤.

![diffing_algorithm_difference_element](assets/img/writing/11/diffing_algorithm_difference_element.png)

ìœ„ ê°„ë‹¨í•œ ì˜ˆì‹œë¥¼ ê°€ì§€ê³  ìƒê°í•´ ë³´ê² ìŠµë‹ˆë‹¤. ë¹„êµ ì•Œê³ ë¦¬ì¦˜ì— ë”°ë¼ ìš°ì„ , Rootë¥¼ ê¸°ì¤€ìœ¼ë¡œ ìì‹ ì—˜ë¦¬ë¨¼íŠ¸ë¡œ ë‚´ë ¤ê°€ë©° ì‹¤ì œ DOMê³¼ ê°€ìƒ DOMì„ ë¹„êµí•©ë‹ˆë‹¤. ì´ë•Œ ë‹¤ë¥¸ ì—˜ë¦¬ë¨¼íŠ¸(ê°€ìƒ DOMì˜ `span`ê³¼ ì‹¤ì œ DOMì˜ `div`)ê°€ ìˆë‹¤ë©´, í•´ë‹¹ ì—˜ë¦¬ë¨¼íŠ¸ì˜ ìì‹ë“¤ì— ëŒ€í•´ì„œëŠ” ë¹„êµë¥¼ ì§„í–‰í•˜ì§€ ì•Šê³  í•˜ìœ„ ìì‹ì„ ëª¨ë‘ ì¬êµ¬ì¶•í•©ë‹ˆë‹¤.

> **Reactê°€ ì„ ì–¸ì (declarative)ì´ë¼ê³  ë§í•  ìˆ˜ ìˆëŠ” ì´ìœ  ì¤‘ í•˜ë‚˜ê°€ ë°”ë¡œ ì´ëŸ¬í•œ ë°©ì‹ì„ ê°€ì§€ê³  ìˆê¸° ë•Œë¬¸**ì…ë‹ˆë‹¤. Reactì˜ ì„ ì–¸ì  íŠ¹ì„±ì€ UIë¥¼ êµ¬ì„±í•˜ê±°ë‚˜ ì—…ë°ì´íŠ¸í•  ë•Œ "ë¬´ì—‡ì„ ë³´ì—¬ì¤˜ì•¼ í•˜ëŠ”ì§€"ë§Œ ëª…ì‹œí•˜ê³ , "ì–´ë–»ê²Œ ë³€ê²½í• ì§€"ëŠ” Reactê°€ ì•Œì•„ì„œ ì²˜ë¦¬í•œë‹¤ëŠ” ì ì—ì„œ ê¸°ì¸í•©ë‹ˆë‹¤.
> 
> - ìì„¸íˆ ì•Œì•„ë³´ê¸°: [https://react.dev/learn/reacting-to-input-with-state#how-declarative-ui-compares-to-imperative](https://react.dev/learn/reacting-to-input-with-state#how-declarative-ui-compares-to-imperative)
{: .prompt-info }

#### 2-1-2. ìì‹ì— ëŒ€í•œ ì¬ê·€ì  ì²˜ë¦¬

DOM ë…¸ë“œì˜ ìì‹ë“¤ì„ ì¬ê·€ì ìœ¼ë¡œ ì²˜ë¦¬í•  ë•Œ, ReactëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ë™ì‹œì— ë‘ ë¦¬ìŠ¤íŠ¸ë¥¼ ìˆœíšŒí•˜ê³  ì°¨ì´ì ì´ ìˆìœ¼ë©´ ë³€ê²½ì„ ìƒì„±í•©ë‹ˆë‹¤.

ì˜ˆë¥¼ ë“¤ì–´, ìì‹ì˜ ëì— ì—˜ë¦¬ë¨¼íŠ¸ë¥¼ ì¶”ê°€í•œë‹¤ë©´, ë‘ íŠ¸ë¦¬ ì‚¬ì´ì˜ ë³€ê²½ì€ ì˜ ì‘ë™í•  ê²ƒì…ë‹ˆë‹¤.

![diffing_algorithm_recursion](assets/img/writing/11/diffing_algorithm_recursion.png)

ReactëŠ” ë‘ íŠ¸ë¦¬ì—ì„œ `<li>first</li>`ê°€ ì¼ì¹˜í•˜ëŠ” ê²ƒì„ í™•ì¸í•˜ê³ , `<li>second</li>`ê°€ ì¼ì¹˜í•˜ëŠ” ê²ƒì„ í™•ì¸í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  ë§ˆì§€ë§‰ìœ¼ë¡œ `<li>third</li>`ë¥¼ ë¹„êµí•˜ëŠ”ë° ì‹¤ì œ DOMì—ëŠ” í•´ë‹¹ ì—˜ë¦¬ë¨¼íŠ¸ê°€ ì—†ìœ¼ë‹ˆ, íŠ¸ë¦¬ì— ì¶”ê°€í•©ë‹ˆë‹¤.

í•˜ì§€ë§Œ ì´ë ‡ê²Œ ë‹¨ìˆœí•˜ê²Œ êµ¬í˜„í•  ê²½ìš°, ì•„ë˜ì™€ ê°™ì´ ë¦¬ìŠ¤íŠ¸ì˜ ë§¨ ì•ì— ì—˜ë¦¬ë¨¼íŠ¸ë¥¼ ì¶”ê°€í•˜ë©´ ì„±ëŠ¥ì´ ì¢‹ì§€ ì•ŠìŠµë‹ˆë‹¤.

![diffing_algorithm_recursion_bad](assets/img/writing/11/diffing_algorithm_recursion_bad.png)

ReactëŠ” ë‘ íŠ¸ë¦¬ì—ì„œ `third`ì™€ `first`ë¥¼ ë¨¼ì € ë¹„êµí•˜ê³ , `first`ì™€ `second`ë¥¼ ë¹„êµí•˜ê¸° ë•Œë¬¸ì—, ì¢…ì† íŠ¸ë¦¬ë¥¼ ê·¸ëŒ€ë¡œ ìœ ì§€í•˜ëŠ” ëŒ€ì‹  ëª¨ë“  ìì‹ì„ ë³€ê²½í•©ë‹ˆë‹¤. ì´ëŸ¬í•œ ë¹„íš¨ìœ¨ì ì¸ ë¹„êµëŠ” ë°ì´í„°ì˜ ìˆ˜ê°€ ë§ì•„ì§ˆìˆ˜ë¡ ë” í° ë¬¸ì œë¥¼ ë‚³ê²Œ ë©ë‹ˆë‹¤. ì´ëŸ¬í•œ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ReactëŠ” key ì†ì„±ì„ ì§€ì›í•©ë‹ˆë‹¤. ìì‹ë“¤ì´ keyë¥¼ ê°€ì§€ê³  ìˆë‹¤ë©´ ReactëŠ” keyë¥¼ í†µí•´ ê¸°ì¡´ íŠ¸ë¦¬ì™€ ì´í›„ íŠ¸ë¦¬ì˜ ìì‹ë“¤ì´ ì¼ì¹˜í•˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.

![diffing_algorithm_recursion_key](assets/img/writing/11/diffing_algorithm_recursion_key.png)

Reactì˜ keyê°€ ì¶”ê°€ëœ ì‹œì ë¶€í„°ëŠ” ReactëŠ” keyë¥¼ ì´ìš©í•´ì„œ ë¹„êµë¥¼ ì§„í–‰í•˜ê¸°ì— `"3"` keyë¥¼ ê°€ì§„ ì—˜ë¦¬ë¨¼íŠ¸ë§Œ ìƒˆë¡œ ì¶”ê°€ë˜ì—ˆë‹¤ëŠ” ì‚¬ì‹¤ì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë ‡ë“¯ì´ Reactì˜ key ì†ì„±ì€ ë¦¬ìŠ¤íŠ¸ ë¹„êµ ê³¼ì •ì—ì„œ **ë¹„íš¨ìœ¨ì ì¸ DOM ì—…ë°ì´íŠ¸ë¥¼ ë°©ì§€í•˜ê³  ì„±ëŠ¥ì„ ìµœì í™”í•˜ëŠ” ë° ì¤‘ìš”í•œ ì—­í• **ì„ í•©ë‹ˆë‹¤.

ê·¸ë ‡ë‹¤ë©´ Reactê°€ íš¨ìœ¨ì ìœ¼ë¡œ DOMì„ ë¹„êµí•˜ê³  ì—…ë°ì´íŠ¸í•  ìˆ˜ ìˆë„ë¡ ì„œë²„ì—ì„œ ì „ë‹¬í•´ ì£¼ëŠ” ë°ì´í„°ì˜ ê³ ìœ  id ê°’ì„ ì ìš©í•˜ì—¬ ë‹¤ì‹œ í™•ì¸í•´ ë³´ê² ìŠµë‹ˆë‹¤.

{% raw %}
```tsx
import { StyleSheet, Text, View, Image, FlatList } from 'react-native';
import { useGetTestData } from './useGetTestData';

export function List() {
  const { data } = useGetTestData();

  return (
    <View style={styles.container}>
      <FlatList
        data={data}
        // âœ… ì„œë²„ì—ì„œ ì „ë‹¬í•´ì£¼ëŠ” ê³ ìœ  idë¡œ key ê°’ì„ ì €ì¥
        keyExtractor={(item) => String(item.id)}
        renderItem={({ item }) => <Item id={item.id} />}
        // ...
      />
    </View>
  );
}
```
{% endraw %}

<div align="center">
  <video controls="" width="240" height="400" muted="" autoplay="">
    <source src="https://github.com/BangDori/bangdori.github.io/raw/main/assets/img/writing/11/flickering_resolve_key.mp4" type="video/mp4">
  </video>
</div>

ê·¸ ê²°ê³¼ ë†€ëê²Œë„ ì´ì „ê³¼ëŠ” 180ë„ ë‹¤ë¥¸ ì„±ëŠ¥ìœ¼ë¡œ JS í”„ë ˆì„ì´ 50ëŒ€ ì´ìƒ ìœ ì§€ë˜ë©°, ê¹œë¹¡ì„ í˜„ìƒë„ ì‚¬ë¼ì§„ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. (ì´ê²ƒì´ ë°”ë¡œ React íœ´ë¦¬ìŠ¤í‹± ì•Œê³ ë¦¬ì¦˜ì˜ í˜....!)

## 3. ê°€ìƒí™” (Virtualization)ì˜ í•œê³„

> **ê°€ìƒí™”**
>
> ì»´í“¨íŒ…ì—ì„œ ê°€ìƒí™”ëŠ” ë¬¼ë¦¬ì  ì»´í“¨íŒ… ë¦¬ì†ŒìŠ¤ë¥¼ ì¼ë ¨ì˜ ê°€ìƒ ë¨¸ì‹ , ìš´ì˜ ì²´ì œ, í”„ë¡œì„¸ìŠ¤ ë˜ëŠ” ì»¨í…Œì´ë„ˆë¡œ ë¶„í• í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” ì¼ë ¨ì˜ ê¸°ìˆ ì…ë‹ˆë‹¤.
> - ì°¸ê³ : [https://en.wikipedia.org/wiki/Virtualization](https://en.wikipedia.org/wiki/Virtualization)

ì•ì„œ ì–¸ê¸‰í–ˆë“¯ì´, React Nativeì˜ FlatListì—ì„œ ê°€ìƒí™” ë¦¬ìŠ¤íŠ¸ëŠ” ëŒ€ëŸ‰ì˜ ë°ì´í„°ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ë Œë”ë§í•˜ê¸° ìœ„í•´ í™”ë©´ì— í•„ìš”í•œ ë°ì´í„°ë§Œ ë Œë”ë§í•˜ëŠ” ê¸°ìˆ ì„ ì˜ë¯¸í•©ë‹ˆë‹¤. ì´ëŸ¬í•œ ë°©ì‹ì€ ì»´í“¨íŒ…ì—ì„œ ì¼ë°˜ì ìœ¼ë¡œ ë§í•˜ëŠ” ê°€ìƒí™”ì™€ëŠ” ë‹¤ë¥¸ ë§¥ë½ì´ì§€ë§Œ, íš¨ìœ¨ì„±ì„ ë†’ì´ê¸° ìœ„í•œ "ê°€ìƒ ì²˜ë¦¬"ë¼ëŠ” ì ì—ì„œëŠ” ìœ ì‚¬í•œ ì›ë¦¬ê°€ ì ìš©ë©ë‹ˆë‹¤.

<details>
  <summary><strong>React Nativeì—ì„œ ì‹œê°ì ìœ¼ë¡œ í™•ì¸í•˜ëŠ” ê°€ìƒí™”</strong></summary>
  <div align="center">
    <video controls="" width="240" height="400" muted="" autoplay="">
      <source src="https://github.com/BangDori/bangdori.github.io/raw/main/assets/img/writing/11/virtualized_mounted.mp4" type="video/mp4">
    </video>
    <img src="assets/img/writing/11/virtualized_list.png" width="480" alt='virtualized list image' />
  </div>
  <p>ì‹¤ì œë¡œ í˜„ì¬ í™”ë©´ì— ë³´ì´ëŠ” ì•„ì´í…œë“¤ì€ mountë˜ë©°, í™”ë©´ì— ë³´ì—¬ì§€ì§€ ì•ŠëŠ” ì´ì „ ë°ì´í„°ë“¤ì€ unmountedë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤</p>
</details>

<br />

ì•ì„œ ê³ ìœ  key ê°’ì„ ì ìš©í•˜ì—¬ ê¹œë¹¡ì„ í˜„ìƒì´ ì‚¬ë¼ì§„ ê²ƒì„ í™•ì¸í•˜ì˜€ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ê³¼ì—° ë” ì´ìƒ ë¬¸ì œê°€ ì—†ì„ê¹Œìš”?

<div align="center">
  <video controls="" width="240" height="400" muted="" autoplay="">
    <source src="https://github.com/BangDori/bangdori.github.io/raw/main/assets/img/writing/11/flickering_issue_on_scroll_up.mp4" type="video/mp4">
  </video>
</div>

ìœ„ ì˜ìƒì—ì„œ í™•ì¸í•  ìˆ˜ ìˆë“¯, ìœ„ë¡œ ìŠ¤í¬ë¡¤í•˜ëŠ” ê²½ìš°ì—ëŠ” ì—¬ì „íˆ ê¹œë¹¡ì„ í˜„ìƒì´ ë‚˜íƒ€ë‚˜ê³  ìˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ë¬¸ì œëŠ” **ê°€ìƒí™” ê¸°ìˆ ì˜ êµ¬ì¡°ì  í•œê³„**ì™€ ê´€ë ¨ì´ ìˆìŠµë‹ˆë‹¤.

ì´ ìƒí™©ì—ì„œ ê¹œë¹¡ì„ í˜„ìƒì´ ë°œìƒí•˜ëŠ” ì£¼ëœ ì›ì¸ì€ Reactê°€ **ë°ì´í„° ë Œë”ë§ì´ ì‚¬ìš©ìì˜ ìŠ¤í¬ë¡¤ ì†ë„ë¥¼ ë”°ë¼ê°€ì§€ ëª»í•˜ê¸° ë•Œë¬¸**ì…ë‹ˆë‹¤. ì•„ë˜ë¡œ ìŠ¤í¬ë¡¤í•˜ëŠ” ê²½ìš° ë‹¤ìŒê³¼ ê°™ì´ ë¦¬ìŠ¤íŠ¸ì˜ ëë¶€ë¶„ì— ë„ë‹¬í–ˆì„ ë•Œ, ìƒˆë¡œìš´ ë°ì´í„°ë¥¼ ìš”ì²­í•˜ê³  ì‘ë‹µë°›ì€ ë°ì´í„°ë¥¼ ë Œë”ë§í•˜ëŠ” ë°©ì‹ì„ ì·¨í•˜ê¸°ì— ì‘ë‹µë°›ì€ ë°ì´í„°ì˜ ìˆ˜ê°€ ì œí•œë˜ì–´ ìˆìŠµë‹ˆë‹¤.

![virtualized_list_on_scroll](assets/img/writing/11/virtualized_list_on_scroll.png)

í•˜ì§€ë§Œ ìœ„ë¡œ ìŠ¤í¬ë¡¤í•˜ëŠ” ê²½ìš° ì„œë²„ë¡œ ë°ì´í„°ë¥¼ ìš”ì²­í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ ì´ì „ì— ë°›ì•„ì˜¨ `unmounted`ëœ ë°ì´í„°ë¥¼ ë Œë”ë§í•©ë‹ˆë‹¤. ê·¸ë ‡ê¸° ë•Œë¬¸ì— ì´ ê³¼ì •ì—ì„œ ë Œë”ë§ ì†ë„ê°€ ì‚¬ìš©ìì˜ ìŠ¤í¬ë¡¤ ì†ë„ë¥¼ ë”°ë¼ê°€ì§€ ëª»í•´ ë¹ˆ í™”ë©´ì´ ë‚˜íƒ€ë‚˜ê±°ë‚˜ ê¹œë¹¡ì´ëŠ” ê²ƒì²˜ëŸ¼ ë³´ì¼ ìˆ˜ ìˆëŠ” ê²ƒì…ë‹ˆë‹¤.

## 4. Conclusion

React Nativeì˜ FlatListëŠ” ëŒ€ìš©ëŸ‰ ë°ì´í„°ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ ê°•ë ¥í•œ ë„êµ¬ì´ë©°, key ì†ì„±ì„ í†µí•´ Reactì˜ ê°€ìƒ DOM ë¹„êµë¥¼ ìµœì í™”í•¨ìœ¼ë¡œì¨ ê¹œë¹¡ì„ í˜„ìƒì„ í•´ê²°í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ì´ëŸ¬í•œ ìµœì í™”ì—ë„ ë¶ˆêµ¬í•˜ê³ , ê°€ìƒí™” ê¸°ìˆ  ìì²´ì˜ êµ¬ì¡°ì  í•œê³„ë¡œ ì¸í•´ ìŠ¤í¬ë¡¤ ì†ë„ê°€ ë Œë”ë§ ì†ë„ë¥¼ ì´ˆê³¼í•˜ëŠ” ê²½ìš° ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆìŒì„ í™•ì¸í•˜ì˜€ìŠµë‹ˆë‹¤.

ê·¸ëŸ¬ë‚˜ êµ‰ì¥íˆ ë¹ ë¥¸ ì†ë„ë¡œ ìœ„ë¡œ ìŠ¤í¬ë¡¤í•˜ëŠ” ê²½ìš°ëŠ” ì¼ë°˜ì ì¸ ì‚¬ìš©ì ì‹œë‚˜ë¦¬ì˜¤ì™€ëŠ” ë‹¤ì†Œ ê±°ë¦¬ê°€ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ëŒ€ë¶€ë¶„ì˜ ì‚¬ìš©ìëŠ” ì•„ë˜ë¡œ ìŠ¤í¬ë¡¤í•˜ë©° ì½˜í…ì¸ ë¥¼ íƒìƒ‰í•˜ê³ , ìœ„ë¡œ ìŠ¤í¬ë¡¤í•˜ë”ë¼ë„ ì¼ë°˜ì ì¸ ì†ë„ë¡œ íƒìƒ‰í•˜ë¯€ë¡œ **ì´ëŸ¬í•œ ë¬¸ì œê°€ ëª¨ë“  ìƒí™©ì—ì„œ ì¹˜ëª…ì ìœ¼ë¡œ ì‘ìš©í•˜ëŠ” ê²ƒì€ ì•„ë‹™ë‹ˆë‹¤.**

ê·¸ë ‡ê¸°ì— ê° ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì‚¬ìš©ë˜ëŠ” ë¦¬ìŠ¤íŠ¸ì˜ ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ê³ ë ¤í•˜ë©´ ì¢‹ì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤.

> ì¶”ê°€ì ì¸ ê´€ì 
> 
> ì•ì„œ ì–¸ê¸‰í•˜ì§€ ì•Šì€ ë‚´ìš©ì´ì§€ë§Œ ì„œë²„ì˜ ì‘ë‹µì´ ë„ˆë¬´ ë¹ ë¥¸ ê²½ìš°, ê±°ì˜ ì¦‰ì‹œ ë°ì´í„°ë“¤ì„ ë°›ì•„ì˜¤ê¸° ë•Œë¬¸ì— ìœ„ë¡œ ìŠ¤í¬ë¡¤ ì‹œ ë°œìƒí•˜ëŠ” ê¹œë¹¡ì„ê³¼ ë™ì¼í•œ ê²°ê³¼ë¥¼ ì´ˆë˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ APIì˜ ìš”ì²­ì„ ì œí•œí•˜ê¸° ìœ„í•œ ì“°ë¡œí‹€ë§(throttling)ì´ë‚˜ ë””ë°”ìš´ì‹±(debouncing) ë“±ì˜ ê¸°ë²•ì„ ì ê·¹ì ìœ¼ë¡œ í™œìš©í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.
{: .prompt-tip }

## ì°¸ê³ 

- [ì¬ì¡°ì • (Reconciliation)](https://ko.legacy.reactjs.org/docs/reconciliation.html)
- [Preserving and Resetting State](https://react.dev/learn/preserving-and-resetting-state)
- [Reacting to Input with State](https://react.dev/learn/reacting-to-input-with-state)
- [Virtual Scroll - ê°€ìƒ ìŠ¤í¬ë¡¤ êµ¬í˜„](https://pepperminttt.tistory.com/56)