---
title: React Native Fastlane Discord ì•Œë¦¼ ì—°ë™í•˜ê¸°
date: 2024-12-01 12:27:00 +/-TTTT
categories: [DevOps]
tags: [app, react native, deployment, fastlane, notifier, discord]
image:
  path: assets/img/thumbnail/fastlane_with_discord_notifier.png
sitemap: 
    changefreq : daily
    priority : 0.5
---

## 1. ê°œìš”

ì•± ê°œë°œìë¡œ ì¼í•˜ë©´ì„œ ëŠë‚€ ì ì€ ê°œë°œí•˜ëŠ” ì‹œê°„ë§Œí¼ì´ë‚˜ **ë°°í¬ì— ë§ì€ ì‹œê°„ì´ íˆ¬ìëœë‹¤ëŠ” ì **ì´ì—ˆë‹¤.

![iOS Deploy Process](assets/img/writing/1/ios_deploy_process.png){: width="480" }
_iOS Internal Testing Deploy Process_

ì•±ì€ ì›¹ê³¼ ë‹¬ë¦¬ ìƒë‹¹íˆ ë³µì¡í•œ í”„ë¡œì„¸ìŠ¤([Android & iOS Deploy Process](https://bangdori.kr/posts/internal-testing/#2-2-android-deploy-process))ë¥¼ ê±°ì³ ë°°í¬ë˜ê¸°ì—, ì•± ìˆ˜ë™ ë°°í¬ë¥¼ ëª‡ ë²ˆë§Œ í•´ë´ë„ ì§„ì ˆë¨¸ë¦¬ê°€ ë‚œë‹¤. ì‹¬ì§€ì–´ ìë™í™” ë°°í¬ë¥¼ êµ¬ì¶•í•˜ëŠ” ê³¼ì •ë„ ë¹Œë“œ ë„˜ë²„ ê´€ë¦¬ë¶€í„° ì‹œì‘í•´ì„œ ì¸ì¦ì„œ ê´€ë¦¬ê¹Œì§€ ìƒê°ë³´ë‹¤ ë³µì¡í•˜ë‹¤. ë‹¤í–‰íˆë„ ê´€ë ¨ ìë£Œê°€ ë§ì•„ fastlaneì„ ì´ìš©í•´ ë¹„êµì  ë¹ ë¥´ê²Œ í•´ê²°í•  ìˆ˜ ìˆì—ˆë‹¤.

ê·¼ë° ë¬¸ì œëŠ” ë°°í¬ ìë™í™”ë¥¼ ì ìš©í•˜ì—¬ ë³µì¡í•œ í”„ë¡œì„¸ìŠ¤ë¥¼ ê°„í¸í•˜ê²Œ ì²˜ë¦¬í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆëŠ”ë°, ë°°í¬ê°€ ëë‚¬ë‹¤ëŠ” ê³µì§€ë¥¼ ìœ„í•´ 15~20ë¶„ê°€ëŸ‰ì„ ë§¤ë²ˆ ê¸°ë‹¤ë¦¬ê³  ìˆì—ˆë‹¤ëŠ” ê²ƒì´ì—ˆë‹¤. (ì§„ì§œ.... ë°”ë³¸ê°€? ğŸ¥²)

ê·¸ë˜ì„œ ì˜¤ëŠ˜ì€ **ì•Œë¦¼ ìë™í™” ê¸°ëŠ¥**ì„ ì¶”ê°€í•˜ì—¬ ìƒì–´ë²„ë¦° ì‹œê°„ì„ ë˜ì°¾ì•„ ë³´ë ¤ê³  í•œë‹¤.

## 2. ì•Œë¦¼ ìë™í™”

> **Fastlane**
> 
> Androidì™€ iOS ë°°í¬ë¥¼ ë‹¨ìˆœí™”í•˜ëŠ” ë° ëª©ì ì„ ë‘” Rubyê¸°ë°˜ì˜ ì˜¤í”ˆ ì†ŒìŠ¤ í”Œë«í¼
{: .prompt-info }

Fastlaneì€ ê¸°ë³¸ì ìœ¼ë¡œ [slack plugin](https://docs.fastlane.tools/actions/slack/)ì´ ì—°ë™ë˜ì–´ ìˆì–´ slackì„ ì‚¬ìš©í•˜ê³  ìˆë‹¤ë©´ ì†ì‰½ê²Œ ì¶”ê°€í•  ìˆ˜ ìˆë‹¤. í•˜ì§€ë§Œ ìš°ë¦¬ íŒ€ì€ discordë¥¼ ì‚¬ìš©í•˜ê³  ìˆê¸° ë•Œë¬¸ì— ì•Œë¦¼ ìë™í™”ë¥¼ ìœ„í•´ [discord_notifier ì™¸ë¶€ í”ŒëŸ¬ê·¸ì¸](https://github.com/nikolas-theodosis/fastlane-discord_notifier)ì„ ì¶”ê°€í•´ì•¼ í•œë‹¤.

ìš°ì„  androdì™€ iOSì— ëŒ€í•œ fastlane ìë™í™”ê°€ ì ìš©ë˜ì–´ ìˆë‹¤ë©´, ë‹¤ìŒê³¼ ê°™ì´ fastlane í´ë”ë¥¼ í™•ì¸í•  ìˆ˜ ìˆì„ ê²ƒì´ë‹¤.

![fastlane_folder_structure](assets/img/writing/12/fastlane_folder_structure.png){: width="240" }

iOSëŠ” ios í´ë”ë¡œ, androidëŠ” android í´ë”ë¡œ ì´ë™í•œ í›„ ì•„ë˜ ëª…ë ¹ì–´ë¥¼ í†µí•´ `discord_notifier` í”ŒëŸ¬ê·¸ì¸ì„ ì¶”ê°€í•´ ì£¼ë©´ ëœë‹¤.

```shell
fastlane add_plugin discord_notifier
```

ì´ë ‡ê²Œ í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì´ ì„¤ì¹˜ê°€ ì™„ë£Œë˜ì—ˆë‹¤ëŠ” ë©”ì‹œì§€ì™€ í•¨ê»˜ fastlane í´ë” ë‚´ë¶€ì— PluginFileì´ ì¶”ê°€ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

![install discord notifier](assets/img/writing/12/install_discord_notifier.png)

{% raw %}
```ruby
# Autogenerated by fastlane
#
# Ensure this file is checked in to source control!

+ gem 'fastlane-plugin-discord_notifier'
```
{% endraw %}

ë§Œì•½ ì´ë¯¸ ì™¸ë¶€ í”ŒëŸ¬ê·¸ì¸ë“¤ì„ ì ìš©í•œ ìƒíƒœë¼ë©´ PluginFile í•˜ë‹¨ì— `fastlane-plugin-discord_notifier`ì´ ì¶”ê°€ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

ì´ë•Œ ì£¼ì˜í•  ì ì´ ìˆë‹¤. Gemfileì— `plugins_path`ê°€ PluginFileì„ ì œëŒ€ë¡œ ì°¸ì¡°í•˜ê³  ìˆëŠ”ì§€ë¥¼ í™•ì¸í•´ì•¼ í•œë‹¤.

{% raw %}
```ruby
source "https://rubygems.org"

gem "fastlane"

- plugins_path = File.join(File.dirname(__FILE__), '', 'Pluginfile') # ğŸš¨
+ plugins_path = File.join(File.dirname(__FILE__), 'fastlane', 'Pluginfile') # âœ…
eval_gemfile(plugins_path) if File.exist?(plugins_path)
```
{% endraw %}

Pluginfileì€ fastlane í´ë” ë‚´ë¶€ì— ì™¸ë¶€ í”ŒëŸ¬ê·¸ì¸ì„ ê°€ì ¸ì˜¬ ë•Œ ìƒì„±ë˜ê¸° ë•Œë¬¸ì—, `plugins_path`ê°€ ìœ„ì™€ ê°™ì´ ë˜ì–´ ìˆë‹¤ë©´ fastlaneì„ í¬í•¨í•œ ê²½ë¡œë¡œ ìˆ˜ì •í•´ì•¼ í•œë‹¤. (ë§Œì•½ ì˜¬ë°”ë¥¸ ê²½ë¡œë¥¼ ì„¤ì •í•´ì£¼ì§€ ì•ŠëŠ”ë‹¤ë©´ ë””ìŠ¤ì½”ë“œ ì•Œë¦¼ ë‹¨ê³„ì—ì„œ ì™¸ë¶€ í”ŒëŸ¬ê·¸ì¸ì„ ê°€ì ¸ì˜¤ì§€ ëª»í•˜ê³  ì—ëŸ¬ê°€ ë°œìƒí•˜ê²Œ ëœë‹¤. ğŸ¤¯)

ì´ì œ ì¤€ë¹„ëŠ” ì™„ë£Œë˜ì—ˆê³  androidì—ì„œëŠ” `upload_to_play_store` ì´í›„, iOSì—ì„œëŠ” `upload_to_testflight` ì´í›„ ë””ìŠ¤ì½”ë“œ ì•Œë¦¼ì„ ì¶”ê°€í•´ì£¼ë©´ ëœë‹¤.

Androidì™€ iOSë¥¼ ë‘˜ ë‹¤ í° ì°¨ì´ëŠ” ì—†ì–´ì„œ, iOSë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì‘ì„±í•˜ê² ë‹¤.

{% raw %}
```ruby
default_platform(:ios) # Fastlane í”Œë«í¼ ì„¤ì •

platform :ios do
  desc "Push a new build to TestFlight"

  lane :internal do # ë‚´ë¶€ í…ŒìŠ¤íŒ… ì—…ë¡œë“œë¥¼ ì§„í–‰í•˜ëŠ” lane ë¸”ë¡
    # ...

    upload_to_testflight # Testflightë¡œ ì•± ì—…ë¡œë“œ

+    discord_notifier( # âœ… ì—…ë¡œë“œ ì„±ê³µ ì‹œ ë””ìŠ¤ì½”ë“œ ì•Œë¦¼ ì „ì†¡
+      webhook_url: webhook_url,
+      title: "ğŸš€ í…ŒìŠ¤íŠ¸ í”Œë¼ì´íŠ¸ #{version} ë²„ì „ ì—…ë¡œë“œ ì„±ê³µ",
+      description: "í˜„ì¬ ë²„ì „: #{version}\në¹Œë“œ ë²ˆí˜¸: #{latest_build_number + 1}\nTestFlightë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”.",
+    )

    clean_build_artifacts # ë¹Œë“œ ê³¼ì •ì—ì„œ ìƒì„±ëœ Artifacts ì •ë¦¬
  end
end
```
{% endraw %}

<details>
  <summary><strong>ë””ìŠ¤ì½”ë“œ Webhook URL ê°€ì ¸ì˜¤ëŠ” ë°©ë²•</strong></summary>
  <div align="center">
    <img src="assets/img/writing/12/discord_webhook.png" width="480" alt='get discord webhook' />
  </div>
</details>

<br />

ì—¬ê¸°ì„œ webhook_urlì€ ë””ìŠ¤ì½”ë“œì˜ webhook_urlì„ ì¶”ê°€í•´ ì£¼ë©´ ë˜ëŠ”ë°, ì •ìƒì ìœ¼ë¡œ ì¶”ê°€í•˜ê³  fastlaneì„ ì´ìš©í•œ ë¹Œë“œë¥¼ ì‹¤í–‰í•´ ë³´ë©´ ë‹¤ìŒê³¼ ê°™ì´ ì•Œë¦¼ì´ ì •ìƒì ìœ¼ë¡œ ì˜¤ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ğŸ‰

![discord_notifier](assets/img/writing/12/discord_notifier.png){: width="360" }

ê·¼ë° ì„±ê³µ ì•Œë¦¼ë§Œ ì˜¤ê³  ì‹¤íŒ¨ ì•Œë¦¼ì´ ì˜¤ì§€ ì•ŠëŠ”ë‹¤ë©´ ì—ëŸ¬ê°€ ë°œìƒí•œ ê²½ìš° ì¦‰ê° ëŒ€ì‘í•  ìˆ˜ ì—†ìœ¼ë‹ˆ, ì—ëŸ¬ê°€ ë°œìƒí•  ê²½ìš°ì— ëŒ€í•´ì„œë„ ë””ìŠ¤ì½”ë“œ ì•Œë¦¼ì„ ì¶”ê°€í•´ ì¤˜ì•¼ í•œë‹¤.

ì´ì™• ì¶”ê°€í•´ ì£¼ëŠ” ê¹€ì— ì—ëŸ¬ ë°œìƒ ì›ì¸ì„ ë©”ì‹œì§€ë¡œ ì¶”ê°€í•´ ì£¼ì.

{% raw %}
```ruby
default_platform(:ios) # Fastlane í”Œë«í¼ ì„¤ì •

platform :ios do
  desc "Push a new build to TestFlight"

  lane :internal do # ë‚´ë¶€ í…ŒìŠ¤íŒ… ì—…ë¡œë“œë¥¼ ì§„í–‰í•˜ëŠ” lane ë¸”ë¡
    # ...

    upload_to_testflight # Testflightë¡œ ì•± ì—…ë¡œë“œ

    discord_notifier( # âœ… ì—…ë¡œë“œ ì„±ê³µ ì‹œ ë””ìŠ¤ì½”ë“œ ì•Œë¦¼ ì „ì†¡
      webhook_url: webhook_url,
      title: "ğŸš€ í…ŒìŠ¤íŠ¸ í”Œë¼ì´íŠ¸ #{version} ë²„ì „ ì—…ë¡œë“œ ì„±ê³µ",
      description: "í˜„ì¬ ë²„ì „: #{version}\në¹Œë“œ ë²ˆí˜¸: #{latest_build_number + 1}\nTestFlightë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”.",
    )

    clean_build_artifacts # ë¹Œë“œ ê³¼ì •ì—ì„œ ìƒì„±ëœ Artifacts ì •ë¦¬
  end

+  error do |lane, exception| # lane ì‹¤í–‰ ì¤‘ ì˜ˆì™¸ê°€ ë°œìƒí–ˆì„ ë•Œ í˜¸ì¶œë˜ëŠ” ë¸”ë¡
+    discord_notifier( # ğŸš¨ ì—…ë¡œë“œ ì‹¤íŒ¨ ì‹œ ë””ìŠ¤ì½”ë“œ ì•Œë¦¼ ì „ì†¡
+      webhook_url: webhook_url,
+      title: "âŒ í…ŒìŠ¤íŠ¸ í”Œë¼ì´íŠ¸ ì—…ë¡œë“œ ì‹¤íŒ¨",
+      description: "ì—ëŸ¬: #{exception.message}",
+    )
+  end
end
```
{% endraw %}

ìœ„ì™€ ê°™ì´ lane ë¸”ë¡ì—ì„œ ì—ëŸ¬ê°€ ë°œìƒí–ˆì„ ë•Œ í˜¸ì¶œí•˜ëŠ” error ë¸”ë¡ì„ ì¶”ê°€í•´ ì£¼ê³ , error ë¸”ë¡ì—ì„œ ë””ìŠ¤ì½”ë“œ ì•Œë¦¼ ì „ì†¡ì„ ì¶”ê°€í•´ ì£¼ì. ê·¸ëŸ¼ fastlaneì´ ë™ì‘í•˜ëŠ” ê³¼ì •ì—ì„œ ì—ëŸ¬ê°€ ë°œìƒí•˜ë©´ ì—ëŸ¬ ë©”ì‹œì§€ì™€ í•¨ê»˜ ë””ìŠ¤ì½”ë“œ ì•Œë¦¼ì´ ì •ìƒì ìœ¼ë¡œ ì˜¤ê²Œ ëœë‹¤. (discordëŠ” ì™¸ë¶€ í”ŒëŸ¬ê·¸ì¸ì´ë¼ ê·¸ëŸ°ì§€ slack ì•Œë¦¼ì´ ë” ë³´ê¸° ì¢‹ì€ ê²ƒ ê°™ë‹¤. ğŸ¥²)

![discord_notifier_error](assets/img/writing/12/discord_notifier_error.png){: width="360" }

ë‚œì´ë„ê°€ ë†’ì§€ ì•Šì€ ì‘ì—…ì´ì—ˆì§€ë§Œ, ì•Œë¦¼ ìë™í™” ê¸°ëŠ¥ì„ í†µí•´ ë°°í¬ ì¤‘ ë°œìƒí•˜ë˜ **ë¶ˆí•„ìš”í•œ ëŒ€ê¸° ì‹œê°„ì„ ì—†ì•¨ ìˆ˜ ìˆì—ˆê³ **, ì—ëŸ¬ ë°œìƒ ì‹œ **ì‹ ì†íˆ ëŒ€ì‘í•  ìˆ˜ ìˆëŠ” í™˜ê²½ì„ êµ¬ì¶•**í•  ìˆ˜ ìˆì—ˆë‹¤.

ë˜, **ë¶ˆí•„ìš”í•œ ìˆ˜ì‘ì—…ì„ ìë™í™”**í•˜ë©´ì„œ íŒ€ì˜ ìƒì‚°ì„±ì´ í™•ì‹¤íˆ ê°œì„ ë  ìˆ˜ ìˆë‹¤ëŠ” ê±¸ ëŠê¼ˆë‹¤. ì•ìœ¼ë¡œë„ ì´ëŸ° ì‘ì€ ìë™í™” ì•„ì´ë””ì–´ë“¤ì„ íŒ€ì— ë„ì…í•´ íŒ€ì˜ ê°œë°œ í™˜ê²½ê³¼ ìƒì‚°ì„±ì„ ë†’ì—¬ë‚˜ê°€ì•¼ê² ë‹¤. ğŸš€

## ì°¸ê³ 

- [Fastlaneì„ ì´ìš©í•œ ì•± ìë™ ë°°í¬ - danawa ê¸°ìˆ  ë¸”ë¡œê·¸](https://danawalab.github.io/common/2022/08/23/Fastlane.html)
- [[React Native] Fastlane Slack ì—°ë™](https://millo-l.github.io/ReactNative-fastlane-slack/)
- [[fastlane] slackìœ¼ë¡œ push ì•Œë¦¼ ë³´ë‚´ê¸°](https://artieee.tistory.com/42)